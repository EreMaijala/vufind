<?php
  $listClasses = ['search-grid'];
  if ($this->config()->ajaxResultsEnabled()) {
    $this->headScript()->appendFile('search.js');
    // Ensure OpenURL support is available even if none of the results on the initial
    // page has one:
    $this->headScript()->appendFile('openurl.js');
    $listClasses[] = 'js-record-list';
  }
  if ($class = $this->resultsClass ?? '') {
    $listClasses[] = $this->escapeHtmlAttr($class);
  }
?>
<div class="<?=implode(' ', $listClasses)?>" data-backend="<?=$this->escapeHtmlAttr($this->results->getParams()->getSearchClassId())?>">
  <?php $it = 0; ?>
  <?php foreach ($this->results->getResults() as $current): ?>
    <?=$this->record($current)->getSearchResult('grid', $this->results)?>
    <?php $it++; ?>
    <?php if ($it % 4 === 0): ?>
      <br class="grid-large-break"/>
    <?php elseif ($it % 2 === 0): ?>
      <br class="grid-small-break"/>
    <?php endif; ?>
  <?php endforeach; ?>
</div>
