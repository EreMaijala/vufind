<?php
  // See also similar code in list-grid.phtml
    $listClassesEscaped = ['record-list'];
  if ($this->results->getOptions()->loadResultsWithJsEnabled()) {
    $this->headScript()->appendFile('search.js');
    // Ensure OpenURL support is available even if none of the results on the initial
    // page has one:
    $this->headScript()->appendFile('openurl.js');
    $listClassesEscaped[] = 'js-record-list';
  }
  if ($class = $this->resultsClass ?? '') {
    $listClassesEscaped[] = $this->escapeHtmlAttr($class);
  }
?>
<?php if (!isset($this->indexStart)) $this->indexStart = 0; ?>
<?php $i = $this->indexStart; ?>
<?php $listStart = $this->results->getStartRecord() + $i - $this->indexStart; ?>
<ol class="<?=implode(' ', $listClassesEscaped)?>" start="<?=$listStart?>" data-backend="<?=$this->escapeHtmlAttr($this->results->getParams()->getSearchClassId())?>">
  <?php foreach ($this->results->getResults() as $current): ?>
    <?php $recordNumber = $this->results->getStartRecord() + $i - $this->indexStart; ?>
    <?php // Data-record-number attribute is for analytics use.  Do not remove. ?>
    <li<?php if (empty($this->excludeResultIds)): ?> id="result<?=$i++ ?>"<?php endif; ?> class="result<?=$current->supportsAjaxStatus() ? ' ajaxItem' : ''?>" data-record-number="<?=$this->escapeHtmlAttr($recordNumber)?>">
      <?php if (isset($this->showCheckboxes) && $this->showCheckboxes): ?>
        <?=$this->record($current)->getCheckbox('', 'search-cart-form', $recordNumber)?>
      <?php endif; ?>
      <div class="record-number">
        <?=$recordNumber ?>
      </div>
      <?=$this->record($current)->getSearchResult('list', $this->results)?>
    </li>
  <?php endforeach; ?>
</ol>
